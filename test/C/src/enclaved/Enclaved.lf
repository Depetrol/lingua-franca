target C

preamble {=
  #include "platform.h"
=}

reactor R1 {
  timer t(30 msec, 100 msec)

  reaction(t) {=
    lf_sleep(MSEC(20));
  =}
}

reactor R2 {
  timer t(0, 10 msec)

  reaction(t) {=
    lf_print("R2: Success");
  =} deadline(10 msec) {=
    lf_print_error_and_exit("R2: Fail");
  =}
}

main reactor {
  r1 = new R1()
  r2 = new R2()
}
